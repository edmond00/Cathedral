# Overview

## Narration Node

- represent a short segment of narration context
- define some **context keywords** that are important in this context
- define possible outcomes when an action succeed in this context
- define possible outcomes when an action succeed in this context :
    - possible switch to other narration node (=narration graph)
    - gameplay reward (new item, new skill)

## Skills

- where they can use in the RP-COT flow
- specific prompt they will use in the RP-COT flow = **skill prompting**
- level using during RNG check

## Observations

- Entry of a narration
- based on **observation skills** (listening, visual analyze, ...)
- LLM generate small text describing one or several obervations observed by the avatar
- text is constrained through GBNF/prompting to include some of the Narration Node keyword
- The narration tone/style is defined by the skill by a **skill prompting**

## Context Keywords

- **Context keywords** of an observation narration text are highlighted like a link in website text
- Through a **LLM evaluation**,  each keywords is associatied with a **thinking skill** (strategy, intuition, focus, logic, ...)
- putting the mouse over this keyword will show the corresponding **thinking skill**
- clicking on this skill will trigger the **thinking* process

## Thinking

- find a list of actions that have coherent :
    - **context keyword** : the one player clicked on
    - **thinking skill** : skill that was associated to the keyword
    - **action skill** : one of the avatar **action skills** selected by the LLM
    - success outcome : randomly preselected from the narration node possible outcome

## Actions

- player can click on one of the actions generated byt the thinking process
- skill check based on the **action skill** level is rolled
- LLM narrated outcome
- success outcome was predefined during the **thinking** process
- Use LLM evaluation to evaluate most coherent faillure outcome
- if succcess outcome is new **narration node**, loop back

## LLM evaluation functions

- asking several questions that can be answered by yes/no to the LMM
- only request 1 next token
- sum up probabilites of yes and no for each questions
- return a score based on the ratio of this sum

# UI

Will require :
- scrolling system to scroll the current narration
    - the narration UI is clear only after the outcome of the selected action
      - it should be possible to click on keyword, look at the proposed action, click on an other keywords to check other possible action, finaly select an action of the first keyword
      - some "action thinking limit" will be considered later
- mouse centered terminal above the screen grid terminal
    - show some information when the mouse is on a clickable text (keyword, action)


# Example